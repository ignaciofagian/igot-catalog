{"version":3,"file":"server.js","mappings":"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","sources":["webpack://server/./src/controllers/attribute.ts","webpack://server/./src/index.ts","webpack://server/./src/routes/index.ts","webpack://server/./src/store.ts","webpack://server/./src/utils.ts","webpack://server/external commonjs \"body-parser\"","webpack://server/external commonjs \"convert-excel-to-json\"","webpack://server/external commonjs \"cors\"","webpack://server/external commonjs \"express\"","webpack://server/external node-commonjs \"fs\"","webpack://server/external node-commonjs \"path\"","webpack://server/webpack/bootstrap","webpack://server/webpack/before-startup","webpack://server/webpack/startup","webpack://server/webpack/after-startup"],"sourcesContent":["import { Result } from \"../utils\";\r\nimport { IStore, Store } from \"../store\";\r\n\r\ntype Data = {\r\n  attrIdentity: number;\r\n  abbIdentity: number;\r\n  abbreviatures: any[];\r\n  attributes: any[];\r\n};\r\n\r\nexport interface AttrParts {\r\n  original: string;\r\n  current: string;\r\n  wordType: WordType;\r\n}\r\n\r\nexport interface AttrResult {\r\n  status: 200 | 400;\r\n  attribute?: string;\r\n  conceptType?: ConceptType;\r\n  errors?: string[];\r\n  messages?: string[];\r\n  parts?: AttrParts[];\r\n}\r\n\r\ntype WordType = \"StopWord\" | \"Abbreviation\" | \"Default\" | \"None\";\r\n\r\nexport type ConceptType =\r\n  | \"OneWordEndS\"\r\n  | \"TwoWordsEndS\"\r\n  | \"OneOrTwoWords\"\r\n  | \"ThreeOrMoreWords\";\r\n\r\nclass AttributeController {\r\n  private store: IStore<Data>;\r\n  private db: Data;\r\n\r\n  async initialize() {\r\n    this.store = new Store<Data>(\"db.json\");\r\n    this.db = await this.store.read();\r\n  }\r\n\r\n  public getAbbreviatureList() {\r\n    return this.db.abbreviatures;\r\n  }\r\n\r\n  public getAttributeList() {\r\n    return this.db.attributes;\r\n  }\r\n\r\n  public async addAbbreviature(abbrev: any): Promise<Result> {\r\n    // check if already exists\r\n    const exists = this.db.abbreviatures.find(\r\n      (e: any) => e.abbreviature.toUpperCase() == abbrev.abbreviature.toUpperCase()\r\n    );\r\n    if (exists) {\r\n      return new Result(400, `La abreviatura ${abbrev.abbreviature} ya existe.`);\r\n    }\r\n\r\n    this.db.abbIdentity = this.db.abbIdentity + 1;\r\n    this.db.abbreviatures.unshift({\r\n      id: this.db.abbIdentity,\r\n      name: abbrev.name,\r\n      abbreviature: abbrev.abbreviature.replace(/\\b\\w/g, (c) => c.toUpperCase()),\r\n      description: abbrev.description ?? abbrev.name,\r\n    });\r\n    this.updateAttributes();\r\n    await this.store.write(this.db);\r\n    return new Result(200);\r\n  }\r\n\r\n  public async editAbbreviature(abbrev: any): Promise<Result> {\r\n    const exists = this.db.abbreviatures.find(\r\n      (e: any) => e.abbreviature.toUpperCase() == abbrev.abbreviature.toUpperCase() && e.id != abbrev.id\r\n    );\r\n    if (exists) {\r\n      return new Result(400, `La abreviatura ${abbrev.abbreviature} ya existe.`);\r\n    }\r\n    const currentAbbrev = this.db.abbreviatures.find((e: any) => e.id == abbrev.id);\r\n    if (currentAbbrev) {\r\n      currentAbbrev.name = abbrev.name;\r\n      currentAbbrev.abbreviature = abbrev.abbreviature.replace(/\\b\\w/g, (c) => c.toUpperCase());\r\n      currentAbbrev.description = abbrev.description;\r\n    }\r\n    this.updateAttributes();\r\n    await this.store.write(this.db);\r\n    return new Result(200);\r\n  }\r\n\r\n  public async deleteAbbreviature(abbrevId: any): Promise<Result> {\r\n    this.db.abbreviatures = this.db.abbreviatures.filter((e: any) => e.id != abbrevId);\r\n    this.updateAttributes();\r\n    await this.store.write(this.db);\r\n    return new Result(200);\r\n  }\r\n\r\n  public async addAttribute(attr: any): Promise<Result> {\r\n    // validate\r\n    const attrResult = this.calculate(attr.description);\r\n    if (attrResult.status === 200) {\r\n      const exists = this.db.attributes.find(\r\n        (e: any) => e.attribute.toUpperCase() == attrResult.attribute.toUpperCase() && e.id != attr.id\r\n      );\r\n      if (exists) {\r\n        return new Result(400, `El atributo ${attr.attribute} (${exists.name}) ya existe.`);\r\n      }\r\n      this.db.attrIdentity = this.db.attrIdentity + 1;\r\n      this.db.attributes.unshift({\r\n        id: this.db.attrIdentity,\r\n        name: attrResult.parts?.filter((part: AttrParts) => part.wordType != 'StopWord').map((part: AttrParts) => part.original).join(' '),\r\n        attribute: attrResult.attribute,\r\n        description: attr.description,\r\n      });\r\n      await this.store.write(this.db);\r\n      return new Result(200);\r\n    }\r\n    return new Result(400, attrResult.errors.join(\"\\n\"));\r\n  }\r\n\r\n  public async editAttribute(attr: any): Promise<Result> {\r\n    const currentAttr = this.db.attributes.find((e: any) => e.id == attr.id);\r\n    const attrResult = this.calculate(attr.name);\r\n    if (attrResult.status === 200) {\r\n      if (currentAttr) {\r\n        const exists = this.db.attributes.find(\r\n          (e: any) => e.attribute.toUpperCase() == attrResult.attribute.toUpperCase() && e.id != attr.id\r\n        );\r\n        if (exists) {\r\n          return new Result(400, `El atributo ${attr.attribute} (${exists.name}) ya existe.`);\r\n        }\r\n        currentAttr.name = attrResult.parts?.filter((part: AttrParts) => part.wordType != 'StopWord').map((part: AttrParts) => part.original).join(' ')\r\n        currentAttr.attribute = attr.attribute;\r\n        currentAttr.description = attr.description;\r\n      }\r\n      await this.store.write(this.db);\r\n      return new Result(200);\r\n    }\r\n    return new Result(400, attrResult.errors.join(\"\\n\"));\r\n  }\r\n\r\n  public async deleteAttribute(attrId: any): Promise<Result> {\r\n    this.db.attributes = this.db.attributes.filter((e: any) => e.id != attrId);\r\n    await this.store.write(this.db);\r\n    return new Result(200);\r\n  }\r\n\r\n  private updateAttributes() {\r\n    const attributes = this.db.attributes;\r\n    attributes.forEach((attr: any) => {\r\n      const attrResult = this.calculate(attr.name);\r\n      if (attrResult.status == 200) {\r\n        attr.attribute = attrResult.attribute;\r\n      }\r\n    });\r\n  }\r\n\r\n  private calculate(raw: string): AttrResult {\r\n    const abbrevsLowerCase = this.db.abbreviatures.map((e: any) =>\r\n      e.abbreviature.toLocaleLowerCase()\r\n    );\r\n    const [result, words] = this.validateInputWords(raw);\r\n    const parts: AttrParts[] = [];\r\n\r\n    if (result.status === 200) {\r\n      let conceptType: ConceptType | null;\r\n  \r\n      // check stop words\r\n      words.forEach((word: string) => {\r\n        // stop word\r\n        if (stopWords.includes(word.toLocaleLowerCase())) {\r\n          parts.push({\r\n            current: \"\",\r\n            original: word,\r\n            wordType: \"StopWord\",\r\n          });\r\n        } \r\n        // abbreviation\r\n        else if (abbrevsLowerCase.includes(word.toLocaleLowerCase())) {\r\n          const abb = this.db.abbreviatures.find((e: any) => {\r\n            if (e.name.toLocaleLowerCase() === word.toLocaleLowerCase()) {\r\n              return e;\r\n            }\r\n            return false;\r\n          });\r\n          if (abb) {\r\n            parts.push({\r\n              current: abb.abbreviature,\r\n              original: word,\r\n              wordType: \"Abbreviation\",\r\n            });\r\n          } else throw new Error(\"Cannot find abbrev\");\r\n        } \r\n        // default\r\n        else {\r\n          parts.push({\r\n            current: word,\r\n            original: word,\r\n            wordType: \"Default\",\r\n          });\r\n        }\r\n      });\r\n\r\n\r\n      // apply rules\r\n      const defaultWords: AttrParts[] = parts.filter((part: AttrParts) => part.wordType === 'Default')\r\n        \r\n      // Cuando el concepto tiene una palabra y termina en ese, poner las 4 primeras letras de la palabra y agregar ese al final.\r\n      if (defaultWords.length === 1 && defaultWords[0].current[defaultWords[0].current.length - 1] === 's') {\r\n        defaultWords[0].current = defaultWords[0].current.slice(0,4) + 's'\r\n        conceptType = 'OneWordEndS';\r\n      }\r\n\r\n      // Cuando el concepto tiene 2 palabras que terminan en ese, poner las 4 primeras letras de la primera palabra, las 4 primeras letras de la segunda y agregar ese al final.\r\n      else if (defaultWords.length === 2 && defaultWords[1].current[defaultWords[1].current.length - 1] === 's') {\r\n        defaultWords[0].current = defaultWords[0].current.slice(0,4);\r\n        defaultWords[1].current = defaultWords[1].current.slice(0,4) + 's'\r\n        conceptType = 'TwoWordsEndS';\r\n      }\r\n\r\n      // Cuando el concepto tiene 2 palabras se utiliza el truncamiento con las primeras 4 letras por palabra\r\n      else if (defaultWords.length === 2) {\r\n        defaultWords[0].current = defaultWords[0].current.slice(0,4);\r\n        defaultWords[1].current = defaultWords[1].current.slice(0,4) \r\n        conceptType = 'OneOrTwoWords';\r\n      }\r\n\r\n      // Cuando el concepto tiene 1 palabra se utiliza el truncamiento con las primeras 4 letras por palabra\r\n      else if (defaultWords.length === 1) {\r\n        defaultWords[0].current = defaultWords[0].current.slice(0,4);\r\n        conceptType = 'OneOrTwoWords';\r\n      }\r\n\r\n      // Cuando el concepto tiene 3 palabras hasta 10, utilizar el criterio de truncamiento para las fÃ³rmulas fijas, esto es, se toma la inicial de cada palabra.\r\n      else {\r\n        defaultWords.forEach((part: AttrParts) => part.current = part.current.slice(0,1));\r\n        conceptType = 'ThreeOrMoreWords';\r\n      }\r\n\r\n      // set current to starting in capital letter\r\n      defaultWords.forEach((part: AttrParts) => part.current = part.current.replace(/\\b\\w/g, (c) => c.toUpperCase()));\r\n\r\n      let attribute: string = parts.map((part: AttrParts) => part.current.trim().replace(/\\b\\w/g, (c) => c.toUpperCase())).join('')\r\n\r\n      return { status: 200, parts, attribute, conceptType };\r\n    }\r\n\r\n    return { status: 400, errors: [result?.description ?? \"\"] };\r\n  }\r\n\r\n  private validateInputWords(raw: string): [Result, any?] {\r\n    const words = raw\r\n      .split(\" \")\r\n      // remove spaces\r\n      .map((e: string) =>\r\n        e\r\n          .trim()\r\n          .normalize(\"NFD\")\r\n          .replace(/[\\u0300-\\u036f]/g, \"\")\r\n      )\r\n      // filter 0 length\r\n      .filter((e: string) => e.length > 0);\r\n\r\n    if (words.length > 10) {\r\n      return [{ status: 400, description: \"No se puede ingresar mas de 10 palabras.\" }];\r\n    }\r\n\r\n    return [{ status: 200 }, words];\r\n  }\r\n}\r\n\r\nconst stopWords = [\r\n  \"a\",\r\n  \"aca\",\r\n  \"ahi\",\r\n  \"al\",\r\n  \"algo\",\r\n  \"algun\",\r\n  \"alguna\",\r\n  \"alguno\",\r\n  \"algunos\",\r\n  \"alla\",\r\n  \"alli\",\r\n  \"ambos\",\r\n  \"ante\",\r\n  \"antes\",\r\n  \"aquel\",\r\n  \"aquella\",\r\n  \"aquello\",\r\n  \"aquellos\",\r\n  \"aqui\",\r\n  \"arriba\",\r\n  \"asi\",\r\n  \"atras\",\r\n  \"aun\",\r\n  \"aunque\",\r\n  \"bien\",\r\n  \"cada\",\r\n  \"casi\",\r\n  \"como\",\r\n  \"con\",\r\n  \"cual\",\r\n  \"cuales\",\r\n  \"cualquier\",\r\n  \"cualquiera\",\r\n  \"cualquieras\",\r\n  \"cuan\",\r\n  \"cuando\",\r\n  \"cuanto\",\r\n  \"cuanta\",\r\n  \"cuantas\",\r\n  \"de\",\r\n  \"del\",\r\n  \"demas\",\r\n  \"desde\",\r\n  \"donde\",\r\n  \"dos\",\r\n  \"el\",\r\n  \"el\",\r\n  \"ella\",\r\n  \"ello\",\r\n  \"ellos\",\r\n  \"ellas\",\r\n  \"en\",\r\n  \"eres\",\r\n  \"esa\",\r\n  \"ese\",\r\n  \"eso\",\r\n  \"esas\",\r\n  \"esos\",\r\n  \"esta\",\r\n  \"estas\",\r\n  \"etc\",\r\n  \"ha\",\r\n  \"hasta\",\r\n  \"la\",\r\n  \"lo\",\r\n  \"los\",\r\n  \"las\",\r\n  \"me\",\r\n  \"mi\",\r\n  \"mis\",\r\n  \"mia\",\r\n  \"mias\",\r\n  \"mientras\",\r\n  \"muy\",\r\n  \"ni\",\r\n  \"nosotras\",\r\n  \"nosotros\",\r\n  \"nuestra\",\r\n  \"nuestro\",\r\n  \"nuestras\",\r\n  \"nuestros\",\r\n  \"nos\",\r\n  \"otra\",\r\n  \"otro\",\r\n  \"otros\",\r\n  \"para\",\r\n  \"pero\",\r\n  \"pues\",\r\n  \"que\",\r\n  \"que\",\r\n  \"si\",\r\n  \"si\",\r\n  \"siempre\",\r\n  \"siendo\",\r\n  \"sin\",\r\n  \"sino\",\r\n  \"sobre\",\r\n  \"sr\",\r\n  \"sra\",\r\n  \"sres\",\r\n  \"sta\",\r\n  \"su\",\r\n  \"sus\",\r\n  \"te\",\r\n  \"tu\",\r\n  \"tus\",\r\n  \"un\",\r\n  \"una\",\r\n  \"uno\",\r\n  \"unas\",\r\n  \"unos\",\r\n  \"usted\",\r\n  \"ustedes\",\r\n  \"vosotras\",\r\n  \"vosotros\",\r\n  \"vuestra\",\r\n  \"vuestro\",\r\n  \"vuestras\",\r\n  \"vuestros\",\r\n  \"y\",\r\n  \"ya\",\r\n];\r\n\r\nexport default new AttributeController();\r\n","import * as express from \"express\";\r\nimport * as http from \"http\";\r\nimport * as cors from \"cors\";\r\nimport { json } from \"body-parser\";\r\nimport router from \"./routes\";\r\nimport ctrlAttribute from \"./controllers/attribute\";\r\nimport { loadFromExcel } from \"./utils\";\r\n\r\nexport class App {\r\n  private appServer: any;\r\n\r\n  async initialize() {\r\n    await ctrlAttribute.initialize();\r\n    // await loadFromExcel(\"./../data.xlsx\");\r\n  }\r\n\r\n  async runServer() {\r\n    // initialize ctrls\r\n    await this.initialize();\r\n\r\n    const port = process.env.PORT || 4000;\r\n    const basePath = process.env.BASE_HREF || \"\";\r\n\r\n    this.appServer = express();\r\n    this.appServer.use(\r\n      cors({\r\n        origin: (_, callback) => callback(null, true),\r\n        credentials: true,\r\n        exposedHeaders: [\"Content-Disposition\"],\r\n      })\r\n    );\r\n\t\tthis.appServer.use((req, res, next) => {\r\n\t\t\tconsole.log(`Request ${req.url}`);\r\n\t\t\tnext();\r\n\t\t});\r\n    this.appServer.use(json({ limit: \"50mb\" }));\r\n    this.appServer.use(basePath + \"/api\", router);\r\n\r\n    // start http server\r\n    this.appServer.listen(port, () => {\r\n      console.info(`************ Server listening on ${port} ************`);\r\n    });\r\n  }\r\n}\r\n\r\nconst app = new App();\r\napp.runServer();\r\n","import { Request, Response } from 'express';\r\nimport * as express from 'express';\r\nimport attCtrl from './../controllers/attribute';\r\n\r\nconst router = express.Router();\r\n\r\n/**\r\n * Get abreviature list\r\n */\r\nrouter.get(`/abbreviature/list`, async function getAbbreviatureList(req: Request, res: Response) {\r\n\tconst abbList = await attCtrl.getAbbreviatureList();\r\n\treturn res.status(200).json(abbList);\r\n});\r\n\r\n/**\r\n * Post add abreviature\r\n */\r\nrouter.post(`/abbreviature/add`, async function postAbbreviatureAdd(req: Request, res: Response) {\r\n\tconst abbrev = req.body;\r\n\tconst result = await attCtrl.addAbbreviature(abbrev);\r\n\treturn res.status(200).json(result);\r\n});\r\n\r\n/**\r\n * Post edit abreviature\r\n */\r\nrouter.post(`/abbreviature/edit`, async function postAbbreviatureEdit(req: Request, res: Response) {\r\n\tconst abbrev = req.body;\r\n\tconst result = await attCtrl.editAbbreviature(abbrev);\r\n\treturn res.status(200).json(result);\r\n});\r\n\r\n/**\r\n * Post delete abreviature\r\n */\r\nrouter.post(\r\n\t`/abbreviature/delete`,\r\n\tasync function postAbbreviatureDelete(req: Request, res: Response) {\r\n\t\tconst abbrevId = req.body.id;\r\n\t\tconst result = await attCtrl.deleteAbbreviature(abbrevId);\r\n\t\treturn res.status(200).json(result);\r\n\t},\r\n);\r\n\r\n/**\r\n * Get attributes list\r\n */\r\nrouter.get(`/attribute/list`, async function getAttributeList(req: Request, res: Response) {\r\n\tconst attList = await attCtrl.getAttributeList();\r\n\treturn res.status(200).json(attList);\r\n});\r\n\r\n/**\r\n * Post add attribute\r\n */\r\nrouter.post(`/attribute/add`, async function postAttributeAdd(req: Request, res: Response) {\r\n\tconst attr = req.body;\r\n\tconst result = await attCtrl.addAttribute(attr);\r\n\treturn res.status(200).json(result);\r\n});\r\n\r\n/**\r\n * Post edit attribute\r\n */\r\nrouter.post(`/attribute/edit`, async function postAttributeEdit(req: Request, res: Response) {\r\n\tconst attr = req.body;\r\n\tconst result = await attCtrl.editAttribute(attr);\r\n\treturn res.status(200).json(result);\r\n});\r\n\r\n/**\r\n * Post delete attribute\r\n */\r\nrouter.post(`/attribute/delete`, async function postAttributeDelete(req: Request, res: Response) {\r\n\tconst attrId = req.body.id;\r\n\tconst result = await attCtrl.deleteAttribute(attrId);\r\n\treturn res.status(200).json(result);\r\n});\r\n\r\nexport default router;\r\n","import { writeFile, readFile } from \"fs\";\r\nexport interface IStore<T> {\r\n  read(): Promise<T>;\r\n  write(obj: T): Promise<void>;\r\n}\r\n\r\nexport class Store<T> implements IStore<T> {\r\n  filename: string;\r\n\r\n  constructor(filename: string) {\r\n    this.filename = filename;\r\n  }\r\n\r\n  async read(): Promise<T | null> {\r\n    return new Promise((res, rej) => {\r\n      readFile(this.filename, { encoding: \"utf-8\" }, (err, data?: string) => {\r\n        if (err) {\r\n          throw err;\r\n        }\r\n        if (data === null) {\r\n          return res(null);\r\n        } else {\r\n          return res(JSON.parse(data));\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  async write(obj: T): Promise<void> {\r\n    writeFile(this.filename, JSON.stringify(obj, null, 2), (err) => {\r\n      if (err) {\r\n        throw err;\r\n      }\r\n    });\r\n  }\r\n}\r\n","import * as excelToJson from \"convert-excel-to-json\";\r\nimport * as path from \"path\";\r\nimport ctrlAttribute from \"./controllers/attribute\";\r\n\r\nexport class Result {\r\n  status: 200 | 400;\r\n  description?: string;\r\n\r\n  constructor(status: 200 | 400, description?: string) {\r\n    this.status = status;\r\n    this.description = description;\r\n  }\r\n}\r\n\r\nexport async function loadFromExcel(fileName: string) {\r\n  const data = excelToJson({\r\n    sourceFile: path.join(__dirname, fileName),\r\n    header: {\r\n      rows: 1,\r\n    },\r\n    sheets: [\r\n      {\r\n        name: \"Hoja1\",\r\n        columnToKey: {\r\n          A: \"description\",\r\n          D: \"name\",\r\n        },\r\n      },\r\n      {\r\n        name: \"Hoja2\",\r\n        columnToKey: {\r\n          A: \"name\",\r\n          B: \"abbreviature\",\r\n        },\r\n      },\r\n    ],\r\n  });\r\n\r\n  // for (const row of data[\"Hoja2\"]) {\r\n  //   const result = await ctrlAttribute.addAbbreviature(row);\r\n  //   console.log(`${row.name} -> ${result.status} ${result.description}`);\r\n  // }\r\n\r\n  for (const row of data[\"Hoja1\"]) {\r\n    const result = await ctrlAttribute.addAttribute(row);\r\n    console.log(`${row.name} -> ${result.status} ${result.description}`);\r\n  }\r\n}\r\n","module.exports = require(\"body-parser\");","module.exports = require(\"convert-excel-to-json\");","module.exports = require(\"cors\");","module.exports = require(\"express\");","module.exports = require(\"fs\");","module.exports = require(\"path\");","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(607);\n",""],"names":[],"sourceRoot":""}